<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <title>Hello, world!</title>

    <link rel="stylesheet" href="/public/template/assets/css/main.min.css">
  </head>
  <body>
    <div class="container-fluid mt-3">
      <div class="row justify-content-center">
        <div class="col-md-8 text-center">
          <h1 class="great-title">Simulador de inversión</h1>
          <h4 class="sub-title mt-4"> <span class="number">1</span> Puedes seleccionar uno de los productos</h4>
        </div>
      </div>
    </div>
    <section class="product-tab-content">
      <div class="container">
        <ul class="nav nav-tabs" id="productTabContent" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">Bonos</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">CDAs</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">Fondos Mutuos</button>
          </li>
        </ul>
        <div class="tab-content" id="productTabContent">
          <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
            <div class="container">
              <div class="row justify-content-between">
                <div class="col-sm-6 col-md-4 col-xl-4 pe-md-5 amount">
                  <section>
                    <h4 class="sub-title mt-4"><span class="number">2</span> Ingresá el capital a invertir</h4>
                    <div class="form-content ps-4">
                      <div class="toggle-amount mb-2">
                        <input id="gs_amount" type="radio" name="radio_amount" value="gs" checked>
                        <label class="gs_amount" for="gs_amount">Guaranies</label>
                        <input id="dolar_amount" type="radio" name="radio_amount" value="dolar">
                        <label for="dolar_amount">Dolares</label>
                      </div>
                      <div class="form-control-content amount">
                        <span>Gs.</span>
                        <input class="form-control form-control-lg my-2" type="text" name="amount_value" placeholder="" aria-label=".form-control-lg example">
                      </div>
                    </div>
                  </section>
                  <section>
                    <h4 class="sub-title mt-4"><span class="number">3</span> Seleccioná el emisor</h4>
                    <div class="form-content ps-4">
                      <div class="select">
                        <div class="custom-select">
                          <div>
                            <span class="label-select">Emisor</span>
                            <span class="value-select">Sleciona el emisor
                              <input type="hidden" name="emisor_percent_rate" id="1" value="2">
                            </span>
                            <input type="hidden" name="emisor_percent_rate" id="1" value="2">
                          </div>
                          <i class="fa-solid fa-chevron-down"></i>
                        </div>
                        <div class="option">
                          <ul class="custom-option">
                          </ul>
                        </div>
                      </div>
                    </div>
                  </section>
                  
                </div>
                <div class="col-md-8 tab-content-column ps-md-5 py-md-5">
                  <div class="container px-5 py-3">
                    <div class="row">
                      <div class="col-md-4 resume">
                        <h4 class="sub-title tab-text-content mt-4">Capital invertido:</h4>
                        <p id="resume_amount" class="price">Gs. 50.000.000</p>
                      </div>
                      <div class="col-md-4 resume">
                        <h4 class="sub-title tab-text-content mt-4">Plazo de la inversión:</h4>
                        <p id="period_resume" class="years">4 Años</p>
                      </div>
                      <div class="col-md-4 resume">
                        <h4 class="sub-title tab-text-content mt-4">Tasa promedio anual:</h4>
                        <p id="rate_percent_resume">11,00%</p>
                      </div>
                    </div>
                  </div>
                  <div class="result-section">
                    <div class="container px-5 pt-3">
                      <div class="row">
                        <div class="col-md-5 operation-content">
                          <h4 class="sub-title tab-text-content mt-4">Capital invertido:</h4>
                          <p class="price strong">Gs. 50.000.000</p>
                        </div>
                        <div class="col-md-6 operation-content">
                          <h4 class="sub-title tab-text-content mt-4">Plazo de la inversión:</h4>
                          <p class="years">4 Años</p>
                        </div>
                      </div>
                    </div>
                    <div class="container px-5 py-3">
                      <div class="row">
                        <div class="col-md-12 operation-content">
                          <h4 class="sub-title tab-text-content mt-4">Capital + Rendimiento del período:
                          </h4>
                          <p style="font-size: 1.4rem;" class="price strong">Gs. 50.000.000</p>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="container p-4">
                    <p>*Esta simulación tiene únicamente fines educativos e informativos sobre el funcionamiento de las herramientas de inversión y no debe interpretarse como una oferta, propuesta ni recomendación acerca del producto o el emisor.</p>
                    <p>*A fin de cumplir con la resolución N° 35/2023 art. 5to del reglamento General de Mercado de Valores las inversiones se deben realizar vía transferencia bancaria desde la cuenta del titular/es o depósitos vía cheques personales depositados en las cuentas habilitadas.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">...</div>
          <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">...</div>
        </div>
      </div>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="/calculator.js"></script>
    <script>
      const listCountries = [ 
        /* {"name": "Frigorífico Concepción SA | 11,00% | 4 años"}, 
        {"name": "Frigorífico Concepción SA | 15,00% | 4 años"}, 
        {"name": "Frigorífico Concepción SA | 20,00% | 4 años"}, */ 
        {"id": "1","name": "Frigorífico Concepción SA", "percent": "11,00", "years": "4"}, 
        {"id": "12","name": "Frigorífico Concepción SA", "percent": "12,00", "years": "4"}, 
        {"id": "51","name": "Frigorífico Concepción SA", "percent": "13,00", "years": "4"}, 
        {"id": "11","name": "Frigorífico Concepción SA", "percent": "15,00", "years": "4"}, 
        /* {"name": "Albania", "code": "AL"}, 
        {"name": "Algeria", "code": "DZ"}, 
        {"name": "American Samoa", "code": "AS"}, 
        {"name": "AndorrA", "code": "AD"}, 
        {"name": "Angola", "code": "AO"}, 
        {"name": "Anguilla", "code": "AI"}, */
      ]

      
      const customSelect = document.querySelector('.custom-select');

      customSelect.addEventListener('click', function () {
        this.parentElement.classList.toggle('show');
      });




      const customOption = document.querySelector('.custom-option');

      listCountries.forEach(item=> {
        const li = document.createElement('li');
        /* const img = document.createElement('img');
        img.src = `https://www.countryflags.io/${item.code.toLowerCase()}/shiny/32.png`; */
        const span = document.createElement('span');
        let text_aux =  `${item.name} | ${item.percent}% | ${item.years} años`
        const textSpan = document.createTextNode(text_aux)
        span.appendChild(textSpan);

        /* li.appendChild(img); */
        li.appendChild(span);
        customOption.appendChild(li);
      })

      const liCountries = document.querySelectorAll('.custom-option li');
      const value = customSelect.querySelector('.value-select');
      const label = customSelect.querySelector('.label-select');

      liCountries.forEach(item=> {
        item.addEventListener('click', function () {
          /* const img = item.querySelector('img'); */
          const text = item.querySelector('span');
          const optionsArray = text.textContent.split('|');
          /* value.innerHTML = `<img src="${img.src}"> ${text.textContent}`; */
          /* label.innerHTML = optionsArray[0].trim(); */
          value.innerHTML = `${text.textContent}`;
          let amount_value = parseInt($("input[name=amount_value]").val())
          console.log(amount_value, optionsArray);
          if (amount_value && amount_value > 1) {
            $('#resume_amount').innerHTML = amount_value;
            $('#period_resume').innerHTML = optionsArray[1];
            $('#rate_percent_resume').innerHTML = optionsArray[2];
            calculateInvestment(amount_value, optionsArray[1], optionsArray[2])
          }
          customSelect.parentElement.classList.remove('show');
        })
      })


      window.addEventListener('click', function (e) {
        if(e.target !== customSelect && e.target !== customOption) {
          customSelect.parentElement.classList.remove('show');
        }
      })
    </script>
    <script>
      $( document ).ready(function() {
          
      });
    </script>
  </body>
</html>